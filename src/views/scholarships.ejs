<%- include("partials/header"); %>

<div class="Scholarship">
    <div class="scholarship-container">
        <!-- Scholarship Cards Section -->
        <div class="scholarship-section" id="scholarshipContainer">
            
            <!-- Add more cards as needed -->
        </div>

        <!-- Filter Section -->
        <div class="Scholarship-Right">
            <div class="filter-section">
                <input type="text" placeholder="Search..." class="search-bar">
                <div class="filters">
                    <label for="year">Year</label>
                    <select id="year">
                        <option>Freshman</option>
                        <option>Sophmore</option>
                        <option>Junior</option>
                        <option>Senior</option>
                        <!-- Add options as needed -->
                    </select>

                    <label for="state">State</label>
                    <select id="state">
                        <option>All States</option>
                        <option>Alabama</option>
                        <option>Arkansas</option>
                        <option>Florida</option>
                        <option>Georgia</option>
                        <option>Iowa</option>
                        <option>Illinois</option>
                        <option>Indiana</option>
                        <option>Kentucky</option>
                        <option>Lousiana</option>
                        <option>Mississippi</option>
                        <option>Missouri</option>
                        <option>North Carolina</option>
                        <option>South Carolina</option>
                        <option>Tennessee</option>
                        <option>Texas</option>
                        <!-- Add options as needed -->
                    </select>

                    <label for="pell">Pell eligible</label>
                    <select id="pell">
                        <option>Yes</option>
                        <option>No</option>
                    </select>

                    <label for="ethnicity">Ethnicity</label>
                    <select id="ethnicity">
                        <option>All</option>
                        <option>American Indian</option>
                        <option>Alaskan Native</option>
                        <option>Asian</option>
                        <option>Black or African descent</option>
                        <option>Hispanic</option>
                        <option>Native Hawaiin or Pacific Islander</option>
                        <option>Multiple Ethnicities</option>
                        <option>Other</option>
                        <option>White</option>
                        <!-- Add options as needed -->
                    </select>

                    <label for="gpa">GPA</label>
                    <select id="gpa">
                        <option value="All GPAs">All GPAs</option>
                        <option value="4.0">4.0</option>
                        <option value=">3.5">3.5 and above</option>
                        <option value=">3.0">3.0 and above</option>
                        <option value=">2.5">2.5 and above</option>
                        <option value=">2.0">2.0 and above</option>
                        <!-- Add options as needed -->
                    </select>
                </div>
                <!-- Information Box -->
            
            </div>
            <div class="info-box">
                <p>Information on scholarships and how to apply and how to filter.</p>
            </div>
        </div>

    </div>
</div>

<script>
    let scholarshipsData = []; // Store scholarships data for filtering

    async function loadScholarships() {
        try {
            const response = await fetch('/scholarships.json');
            scholarshipsData = await response.json(); // Save the fetched data
            displayScholarships(scholarshipsData); // Display all scholarships initially
        } catch (error) {
            console.error('Error loading scholarships:', error);
        }
    }
    // Function to load JSON data
    function displayScholarships(scholarships) {
        const container = document.getElementById('scholarshipContainer');
        container.innerHTML = ''; // Clear previous scholarship cards

        scholarships.forEach(scholarship => {
            const card = document.createElement('div');
            card.classList.add('scholarship-card');

            card.innerHTML = `
                <div class="content">
                    <h3>${scholarship.title}</h3>
                    <div class="info">
                        <p><strong>Deadline:</strong> ${scholarship.deadline}</p>
                        <p><strong>Amount:</strong> ${scholarship.amount}</p>
                    </div>
                    <a href="#" class="details-link">Scholarship Details</a>
                    <div class="extra-details" style="display: none;">
                        <p>${scholarship["scholarship details"]}</p>
                    </div>
                </div>
                <button class="apply-btn">Apply</button>
            `;

            const detailsLink = card.querySelector('.details-link');
            const extraDetails = card.querySelector('.extra-details');
            detailsLink.addEventListener('click', (e) => {
                e.preventDefault();
                extraDetails.style.display = extraDetails.style.display === 'none' ? 'block' : 'none';
                detailsLink.textContent = extraDetails.style.display === 'none' ? 'Scholarship Details' : 'Hide Details';
            });

            container.appendChild(card);
        });
    }

    // Call the function to load scholarships on page load
    // GPA filter function
    function filterScholarships() {
        const gpaFilter = document.getElementById('gpa').value;

        const filteredScholarships = scholarshipsData.filter(scholarship => {
            let matchesGPA = true;
            if (gpaFilter !== "All GPAs") {
                const gpaValue = parseFloat(gpaFilter.replace(">", ""));
                matchesGPA = gpaFilter.startsWith(">") ? scholarship.gpa >= gpaValue : scholarship.gpa === gpaValue;
            }
            return matchesGPA;
        });

        displayScholarships(filteredScholarships);
    }

    // Event listener for GPA filter
    document.getElementById('gpa').addEventListener('change', filterScholarships);

    // Load scholarships initially
    loadScholarships();
</script>


<%- include("partials/footer"); %>